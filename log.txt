
uso stratified fold perchè sembrano sproporzionati
uso StratifiedShuffleSplit invece di stratifiedKFold perchè non funziona con multiclasse
TERAPIE_ORMONALI_CHECKBOX	            37
TERAPIE_OSTEOPROTETTIVE_CHECKBOX	    349
VITAMINA_D_TERAPIA_CHECKBOX	            45
VITAMINA_D_SUPPLEMENTAZIONE_CHECKBOX	853
CALCIO_SUPPLEMENTAZIONE_CHECKBOX	    413


'1 AGE','1 TERAPIA_OSTEOPROTETTIVA_ORMONALE','1 TERAPIA_OSTEOPROTETTIVA_SPECIFICA', '1 VITAMINA_D_TERAPIA_OSTEOPROTETTIVA','1 BMI','1 FRATTURE',
prevedendo solo le terapie ottengo avg: 1.0, 0.7 con 50 splits


2) la colonna 1 FRATTURA_FEMORE ha null alloro sistemo

3) convertire CAUSE_OSTEOPOROSI_SECONDARIA in valori nomerici
   ma dopo quando inseriscono funziona lo stesso??

4) sostituisco gli 0 in DEFRA_INTERO con la media pechè penso che dovebbe essere null. dico questo perchè ce chi ha defra 0, hanno anche osteoporosi grave

5) frattura vertebre dove il dato non era disponibile ho messo zero.. spero che vada bene e piu di 1 con 2

6) 1 STATO_MENOPAUSALE: sostituisco i 40 valori nulli (20 maschi) con "na"... attenzione è null per le femmine quando stanno ancora mestruando??
    corretto dopo sostituendo con onehotencoding 16)

7)1 ULTIMA_MESTRUAZIONE .. è stata sostituita da quanti anni ha mestruato in totale (ULTIMA_MESTRUAZIONE - BIRTHDATE).. per i maschi e per quelle che stanno ancora
    mestruando ho fatto la media

8) bisogna controllare che io non abbia sostituito con la media qualcuno che è sano...
   se ce un valore mancante si dovrebbe far riferimento ad altre colonne..
   lo farai per DEFRA_INTERO assegnerai un valore piu alto della media a chi sembra piu grave e piu basso a chi lo è meno

9) sostituisco con 0 a chi ha null su VITAMINA_D

10) separo gli anni da TERAPIA_OSTEOPROTETTIVA_SPECIFICA_LISTA e creo una nuova colonna XXX_TERAPIA_OST_ANNI_XXX
il problema che ci sono righe anche con due terapie e come faccio io prendo la data dell'ultima.. mentre quando one-hot-encode
estraggo il principio della prima.....

11)riga 857 e colonna TERAPIA_OSTEOPROTETTIVA_SPECIFICA_LISTA gli anni sono 2008.. sostituisco con 10 nel file osteo.csv
il medico dice in seguito: METOCAL D3. ASSUME ALENDRONATO DAL 2008, CON INTERRUZIONE DI UN ANNO NEL 2013 E 6 MESI NEL 2017.

12) TSEC, estrogeni coniugati equini 0,4 mg- bazedoxifene 20 mg,3 mesi anni
a riga 72 in TERAPIA_OSTEOPROTETTIVA_ORMONALE_LISTA  sostituisco con 1 anno
(nel file osteo.csv)...bisogna chiedere dopo cosa fare.. perchè è l'unico valore strano mi sembra

13) non posso assegnare dei numeri ad ogni categoria in STATO_MENOPAUSALE.. bisogna cambire in one-hot-encoder

14)le colonne TERAPIA_OSTEOPROTETTIVA_SPECIFICA_LISTA, TERAPIA_OSTEOPROTETTIVA_ORMONALE_LISTA tiro fuori i principi e li one-hot-encodo
però ci sono delle rigne con due terapie.. tengo solo la prima

15) per ABUSO_FUMO ho fatto null: 0 sigarette, 1: <=10, 2: >10... ma i valori sono costantii??

16) STATO_MENOPAUSALE onehotencoded

17) TERAPIA_STATO onehotencoded

18) CAUSE_OSTEOPOROSI_SECONDARIA onehotencoded

19)1 SITUAZIONE_COLONNA.. one hot encoded
forse meglio assegnare dei valori crescenti... ma poi se inserisce qualcosa di nuovo?

20) siamo sicuri che NORME_PREVENZIONE non venga aggiunta dopo

21) se facciamo ipotesi che le terapie sono mutalmente ex. allora avremo da prevedere 16 classi al posto di 32
non puoi fare questa assunzione riga 1391

22) per TERAPIA_ALTRO e ALTRE PATOLOGIE vettoriziamo
prima fase: elimino stopword
seconda fase:stemming
terza fase: vettorizazione con bigrammi

23)1 VITAMINA_D_TERAPIA_OSTEOPROTETTIVA_LISTA vectorized
non ho tirato fuori solo il principio perchè sarebbero solo due: calciferolo, colecalciferolo

24) 1 USO_CORTISONE vectorized

25)1 PATOLOGIE_UTERINE_DIAGNOSI vectorized

26) devi assicurarti che se qualcuno inserisce delle parole corte la vettorizazione non di problemi
nomi_nuove_colonne_vectorized_USO_CORTISONE con ngram_range = (2,2) dava errore

27) vercorized NEOPLASIA_MAMMARIA_TERAPIA

28) ho il dubbio che se ce scritto NULL su excel che in realtà quando leggo risulti la stringa NULL
se su excel ce vuoto, allora è veramente null




30) fatto la stessa cosa per frax maggiori inter che pero aveva circa 14 null.. in realta non seriva

31) mi chiedo perchè ci sono degli 0 e non null in defra intero...

32)
null di SITUAZIONE_COLONNA vengono sostituiti con i valori SITUAZIONE_FEMORE_SN o SITUAZIONE_FEMORE_DX
null di SITUAZIONE_FEMORE_SN vengono sostituiti con i valori di SITUAZIONE_FEMORE_DX o SITUAZIONE_COLONNA
null di SITUAZIONE_FEMORE_DX vengono sostituiti con i valori di SITUAZIONE_FEMORE_SN o SITUAZIONE_COLONNA
prevedo FRAX_COLLO_FEMORE_INTERO usando FRAX_FRATTURE_MAGGIORI_INTERO con la regressione
prevedo FRAX_FRATTURE_MAGGIORI_INTERO usando FRAX_COLLO_FEMORE_INTERO  con la regressione
prevedo DEFRA_INTERO usando FRAX_FRATTURE_MAGGIORI_INTERO con la regressione

33) ULTIMA_MESTR..  categorizzo in intervalli grandi sigma e una classe NULL per quelli che non hanno ancora mestruato
categorizzo non ULTIMA_MESTRUAZIONE ma la differenza tra ULTIMA_MESTRUAZIONE-BIRTHDATE

34) USO_CORTISONE è fisso come valore allora basta categorizzarlo
devo cambiare quello che ho gatto prima

35) metto in categorie uso cortisone dato che sono solo 2 valori


m è il numero di volte che è potenzialmente applicabile
n il numero di volte che ha sbaliato... 1/confidenza

prendiamo sole le regole che hanno quel rapporto molto buono


36) prendo fino al 30 settembre perchè ci quelle che sono arrivate di revente stanno ancora aspettando diagnosi


Migliori risultati facendo 5 classificatori differenti
[[358   5]
 [  5   4]]
TERAPIE_ORMONALI_CHECKBOX
avg ext: 0.987, 0.981||98.3 3 folds,, 98.2 4 folds..

[[269  16]
 [ 13  74]]
TERAPIE_OSTEOPROTETTIVE_CHECKBOX
avg ext: 0.927, 0.897||87.1761 jrip 6 folds,87.5 5 folds,88.57 4 FOLDS,88.03 3 FOLDS

[[361   0]
 [  8   3]]
VITAMINA_D_TERAPIA_CHECKBOX
avg ext: 0.981, 0.975|| 97.6 con jrip 6 folds

[[139  21]
 [ 24 188]]
VITAMINA_D_SUPPLEMENTAZIONE_CHECKBOX
avg ext: 0.912, 0.879|||86.91 jrip 5 folds


[[242  27]
 [ 16  87]]
CALCIO_SUPPLEMENTAZIONE_CHECKBOX
avg ext: 0.928, 0.883|||88.37 JRIP 5 folds, 89 jrip 6 folds|| 88.7 jrip 7 folds


37) bisogna chiedere cosa fare con gli anni XXX_TERAPIA_OST_SPEC_ANNI_XXX
perchè se è null io metto 0 anni che non mi sembra proprio giusto


38)
mi ha detto di togliere tutte le colonne che non ci sono nell'interfaccia:
 #'1 L1_AREA',
#'1 L2_AREA',
#'1 L3_AREA',
#'1 L4_AREA',
#'1 TOT_AREA',
#'1 L1_BMC',
#'1 L2_BMC',
#'1 L3_BMC',
#'1 L4_BMC',
#'1 TOT_BMC',
#'1 L1_BMD',
#'1 L2_BMD',
#'1 L3_BMD',
#'1 L4_BMD',
#'1 TOT_BMD',
#'1 L1_Tscore' tolto.. non al 100% sicuro
#'1 L2_Tscore',tolto.. non al 100% sicuro
#'1 L3_Tscore',tolto.. non al 100% sicuro
#'1 L4_Tscore',tolto.. non al 100% sicuro

1 TOT_Tscore' tenuta.. ma non sono sicuro al 100%
1 TOT_Zscore', tenuta.. ma non sono sicuro al 100%

Dove sono i dati che ci sono nell'interfaccia?: Neck T score x2, Neck Z score x2 (Diagnosi Densitometrica)
                                                t score, z score di colonna lombare, femore collo (Densitometria Precedente)



39) preprocessamento_nuovo
AGE: non fatto niente, come in quello vecchio
SEX: lasciato cosi, com'e..weka trasforma in nominal
STATO_MENOPAUSALE: lascio cosi com'è, weka trasforma in nominal
ULTIMA_MESTRUAZIONE: prima facevo la differenza con data di nascita, poi creavo le categorie in base alla dev. standard
                     (medio,poco,tanto )e le celle null mettevo: 'maschio_o_attiva' e poi onehotencode...
                      adesso faccio la stessa cosa tranne onehotencode e sostituire i nullTERAPIA_STATO
TERAPIA_STATO: prima onehotencoding adesso lascio cosi com'è
TERAPIA_OSTEOPROTETTIVA_ORMONALE: weka non trasforma in nominal automaticamente
XXX_TERAPIA_OST_ORM_ANNI_XXX: lascio cosi perchè è numeric.. prima nei null metttevo 0, adesso lascio null
TERAPIA_OSTEOPROTETTIVA_ORMONALE_LISTA: prima avevo onehot-encoding, adesso lascio i valori cosi come sono, weka li
                                        riconosce come nominali
TERAPIA_OSTEOPROTETTIVA_SPECIFICA'stessa cosa che ho fatto sopra
1 TERAPIA_OSTEOPROTETTIVA_SPECIFICA_LISTA'...
XXX_TERAPIA_OST_SPEC_ANNI_XXX',...
VITAMINA_D_TERAPIA_OSTEOPROTETTIVA: lascio cosi
VITAMINA_D_TERAPIA_OSTEOPROTETTIVA_LISTA: lascio vettorizzato cosi
TERAPIA_ALTRO_CHECKBOX: i null sostituisco con 0 (anche prima) chiedere se va bene
TERAPIA_ALTRO: lascio vettorizzato
TERAPIA_COMPLIANCE
BMI: togliere il meno uno e lasciare null!!
FRATTURA_VERTEBRE: trasformo in nominale.. al posto di null metto 'no fratture' e il resto invariato.. bisogna chedere se è giusto
FRATTURA_FEMORE: stessa cosa di sopra..
ABUSO_FUMO: lascio i valori nominali, però al mosto null metto 'no fuma'
USO_CORTISONE: lascio i nominal, e al posto di null metto 'non usa corisone'
CAUSE_OSTEOPOROSI_SECONDARIA: lascio cosi.. non metto niente al posto di null... è meglio mettere 'nessuna causa'?
PATOLOGIE_UTERINE_DIAGNOSI: lasciato vettorizzato.. bisognerebbe mettere ? e non 'na'
NEOPLASIA_MAMMARIA_TERAPIA: lasciato vettorizzato..
DISLIPIDEMIA_TERAPIA: lasciato vettorizzato..
VITAMINA_D: prima al posto di null avevo zero, adesso lascio null
ALTRE_PATOLOGIE: lascio cosi
SITUAZIONE_COLONNA: lasciato cosi
1 FRAX_FRATTURE_MAGGIORI_INTERO: tenuto com'è

40)
sistema ULTIMA_MESTRUAZIONE percè ci sono troppi valori medi e poi tanto e poco non sono troppo pari

41)
TERAPIA_OSTEOPROTETTIVA_ORMONALE_LISTA.. due cure per cella..cosa fare? VETTORIZZARE!!!
TERAPIA_OSTEOPROTETTIVA_SPECIFICA_LISTA de cure per cella

42) dove vettorizzo bisogna metttere ? al posto di na

43)VITAMINA_D_TERAPIA_OSTEOPROTETTIVA_LISTA ha piu valori per riga

44) VITAMINA_D_TERAPIA_OSTEOPROTETTIVA_LISTA.. rifaccio la vettorizzazione con un regex piu preciso
mi è venuta l'idea di categorizzarli, ma ci sono piu cure per riga



45) 'na' delle vettorizzazioni va sostituito con ?

46) ci accorgiamo che CAUSE_OSTEOPOROSI_SECONDARIA puo avere piu valori per cella... allora bisogna vettorizzare

47) TBS_COLONNA_APPLICABILE valori molto strani

48) DEFRA_INTERO ci sono 0 dove dovrebbe essere null...
49) DEFRA_APPLICABILE = 0 -> DEFRA_INTERI = 0, il contrario no
/*mostra che chi ha DEFRA = 0 ha comunque l'osteoporosi*/
select DEFRA_INTERO, SITUAZIONE_COLONNA, SITUAZIONE_FEMORE_DX, SITUAZIONE_FEMORE_SN, OSTEOPOROSI_GRAVE, FRAX_FRATTURE_MAGGIORI_INTERO, FRAX_COLLO_FEMORE_INTERO from diagnosi
where DEFRA_INTERO=0;

50)VITAMINA_D_TERAPIA_OSTEOPROTETTIVA_LISTA sostituisco 10000UI con 10.000UI
e 25000 a 25.000
stessaroba per VITAMINA_D_SUPPLEMENTAZIONE_LISTA



51) in 1 VITAMINA_D_SUPPLEMENTAZIONE_LISTA ce solo 1 cella con 2 cure
per adesso prendo il primo principio che trovo poi cosa fare si vedrà

52) VITAMINA_D_SUPPLEMENTAZIONE_LISTA: sistituisco tutta la cura solo con il principio e la qta

VITAMINA_D_SUPPLEMENTAZIONE_LISTA: 81% fold JRip (principio+quantità se nella forma X.XUI, altri un po diverso) poi 80% 4fold
TERAPIE_ORMONALI_LISTA: 83.7(10 fold) con PART e non funziona se rimuovo i null (cosi com'e)
TERAPIE_OSTEOPROTETTIVE_LISTA: 61% JRip (solo principio)..63% Jrip 4fold non rimuovendo i null, 60% 4fold rimuovendo i null, 61 7fold e senza null
CALCIO_SUPPLEMENTAZIONE_LISTA:73 con jrip (solo principio)..71 4 folf .. 73 10fold..tutti senza null
VITAMINA_D_TERAPIA_LISTA: 42 con part (tenuto cosi com'è perchè ha poche istanze)

VITAMINA_D_SUPPLEMENTAZIONE_CHECK

53)
401
489
1010
1065
1465
indici righe in cui VITAMINA_D_SUPPLEMENTAZIONE_check = 1 e LISTA = NULL



    #class_name = '1 TERAPIE_OSTEOPROTETTIVE_CHECKBOX' #uguale (osteo.csv# )
    #class_name = '1 TERAPIE_ORMONALI_CHECKBOX' #uguale
    #class_name ='1 VITAMINA_D_TERAPIA_CHECKBOX' #uguale
    #class_name ='1 VITAMINA_D_SUPPLEMENTAZIONE_CHECKBOX' #-tanto
    class_name ='1 CALCIO_SUPPLEMENTAZIONE_CHECKBOX' #+ poco
    se è un campo è null, e quindi la regola non si applica,,.. quanto aumento(+) o diminuzione(-) ce
    se dico che la regola è falsa e vado alla successiva... rispetto ad eseguire con i campi null tappati




la prima colonna=di quelli di cui ho deciso di dire qualcosa, quanti ne ho fatti guisti
seconda colonna = quanti non ho detto non so rispetto al totale delle istanze
prima riga= le regole non rifined
seconda riga = regole refined

min_f1=0.8, min_f2=0.1
TERAPIE_OSTEOPROTETTIVE_CHECKBOX
0.8859416445623343 0.0
0.9595959595959596 0.47480106100795755

TERAPIE_ORMONALI_CHECKBOX
0.9602122015915119 0.0
1.0 0.3209549071618037

VITAMINA_D_TERAPIA_CHECKBOX
0.946949602122016 0.0
1.0 0.7639257294429708

VITAMINA_D_SUPPLEMENTAZIONE_CHECKBOX
0.8541114058355438 0.0
0.9895287958115183 0.493368700265252

CALCIO_SUPPLEMENTAZIONE_CHECKBOX
0.8461538461538461 0.0
0.9402390438247012 0.33421750663129973


x)
perchè nel excel che mi ha dato non ce da quanti anni è sospesa?
poi sospesa da x anni per quale terapia che se ne possono selezionare piu

Y)
Densitometria Precedente ... mi sembra collegato alla storia passata.. considerarlo?? se compare nelle regole???

*Anno U.M. onchage() non fa il refresh subito

*VITAMINA_D_TERAPIA_OSTEOPROTETTIVA nel database come ordine 
corrisponde a Vitamina D supplementazione nel sito...

*TERAPIA_ALTRO_CHECKBOX ha null al poso di 0


*ALCOL_CHECKBOX tutti zero in excel.. ma non in db


*Colonna vertebrale parzialmente non analizzabile per deformazioni morfologiche di densità; vertebre valutate
però poi corrispondono a VERTEBRE NON ANALIZZATE nel db


FRAX_PERCENTUALE: tutto zero!?


TBS_COLONNA_VALORE: sia zeri che null??

DEFRA_INTERO: quando leggo online metto 0 se null

Valutazione integrata di dati clinici e densitometrici  non ce nel exl che mi ha dato


Densitometria Precedente
non la consideriamo!?


#TODO: DEFRA_INTERO cosa fare con gli 0 che sarebbero null?
#TODO CONTROLLO_DENSITOMETRICO_CHECKBOX togliere

